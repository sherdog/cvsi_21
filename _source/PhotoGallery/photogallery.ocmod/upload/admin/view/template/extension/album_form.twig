{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-album" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
	  {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
			{%endfor%}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
  <style>
	.webx_header{
		padding:15px;
		background-color:#efefef;
		margin-bottom:10px;
		-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
		box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
	}
	.webx_header img{
		margin-top: 15px;
	}
	.webx_menus{
		list-style: none;
		padding: 0;
		float:right;
	}
	.webx_menus li{
		display: inline-flex;
		text-align:center;
		margin-right:5px;
	}
	.webx_menus li a{
		background-color: #DEDEDE;
		padding: 20px;
		color:#921e6f;
		width:110px;
	}
	.webx_menus li a:hover{
		background-color: #921e6f;
		color:#DEDEDE;
	}
	.webx_menus li a.active{
		background-color: #921e6f;
		color:#DEDEDE;
	}
	.webx_menus li a i{
		font-size: 26px;
	}
	@media (max-width:992px){
		.webx_header img{
			margin:0 auto;
		}
		.webx_menus{
			margin-top:15px;
			text-align:center;
			float:none;
		}
	}
	.form-horizontal .nav-tabs li{
		font-size:13px;
	}
	.form-horizontal .nav-tabs li i{
		margin-right:7px;
	}
	.nav-tabs{
		margin-bottom:0px;
	}
	.webx_content{
		padding:15px;
		border-bottom: 1px solid #DDD;
		border-left: 1px solid #DDD;
		border-right: 1px solid #DDD;
		background-color: #EFEFEF;
	}
	.nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus{
		background-color: #EFEFEF;
	}
	.webx_content .webx_sidebar{
		background-color: #921E6f;		
		border-top:1px solid #921E6f;
		border-left:1px solid #921E6f;
		border-bottom:1px solid #921E6f;
		height:60vh;
	}
	.webx_content .webx_sidebar li a{
		color:#fff;
		font-size: 18px;
	}
	.nav-pills > li.active > a, .nav-pills > li.active > a:hover, .nav-pills > li.active > a:focus{
		color: #921E6F;
		background-color: #EFEFEF;
		border-radius: 0px;
	}
	.webx_content .webx_sidebar li a i{
		margin-right:10px;
	}
	.webx_content .webx_sidebar li a:hover{
		color: #921E6F;
		background-color: #EFEFEF;
		border-radius: 0px;
	}
	.webx_content .webx_sidebar .active a{
		color: #921E6F;
		background-color: #EFEFEF;
		border-radius: 0px;
	}
	.bootstrap-switch .bootstrap-switch-handle-on.bootstrap-switch-primary, .bootstrap-switch .bootstrap-switch-handle-off.bootstrap-switch-primary{
		color: #fff;
		background: #921E6f;
	}
	
	/* Category Page */
	.webx_well .form-group{
		padding-top: 0px;
		padding-bottom: 0px;
	}
	.btn-primary{
		background:none;
		border:none;
		background-color:#921E6f;
	}
	.btn-primary:hover{
		background-color:#921E6f;
	}
	a{
		color:#921E6f;
	}
	a:hover{
		color:#921E6f;
	}
	.table a.asc:after{
		margin-left: 5px;
	}
	.webx_table{
		border: 1px solid #ddd;
	}
	.webx_table td{
		border-right:1px solid #ddd;
	}
	
	/* Dashboard */
	.webx_comment a i{
		margin-right:5px;
	}
	.tile{
		background-color:#921E6f;
	}
	.tile-heading{
		background-color:#6F0C51;
	}
	</style>
    
	<div class="webx_header">
		<div class="col-md-4">
			<img src="../image/catalog/gallery/logo_gallery.png" class="img-responsive" />
		</div>
		<div class="col-md-8">
			<ul class="webx_menus">
				<li><a href="{{ webx_album_list }}" class="{%if _GET['route'] == 'extension/album' %}{%set class = 'active' %}{%endif%}"><i class="fa fa-dashboard"></i><br />Album List</a></li>
				<li><a href="{{ add }}" class="{%if _GET['route'] == 'extension/album/add' or _GET['route'] == 'blog/post/add'%}{%set class = 'active' %}{%endif%}"><i class="fa fa-pencil-square-o"></i><br />Add Album</a></li>
				<li><a href="{{ webx_setting }}" class="{%if _GET['route'] == 'extension/gallerysetting' %}{%set class = 'active' %}{%endif%}"><i class="fa fa-gears"></i><br />Settings</a></li>
			</ul>
		</div>
		<div class="clearfix"></div>
	</div>
		
	
    {%if error_warning %}
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {%endif%}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_form }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-album" class="form-horizontal">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_general }}</a></li>
            <li><a href="#tab-data" data-toggle="tab">{{ tab_data }}</a></li>
			<li><a href="#tab-seo" data-toggle="tab">Seo</a></li>
            <li><a href="#tab-photos" data-toggle="tab">{{ tab_photos }}</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-general">
              <ul class="nav nav-tabs" id="language">
              {% for language in languages %}
                <li><a href="#language{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
					{%endfor%}
              </ul>
              <div class="tab-content">
                 {% for language in languages %}
                <div class="tab-pane" id="language{{ language.language_id }}">
                  <div class="form-group required">
                    <label class="col-sm-2 control-label" for="input-title{{ language.language_id }}">{{ entry_title }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="album_description[{{ language.language_id }}][title]" value="{{ album_description[language.language_id] ? album_description[language.language_id].title }}" placeholder="{{ entry_title }}" id="input-title{{ language.language_id }}" class="form-control" />
						  {% if error_title[language.language_id] %}
                      <div class="text-danger">{{ error_title[language.language_id] }}</div>
						  {%endif%}
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-description{{ language['language_id'] }}">{{ entry_description }}</label>
                    <div class="col-sm-10">
                      <textarea name="album_description[{{ language.language_id }}][description]" placeholder="{{ entry_description }}" id="input-description{{ language.language_id }}" data-toggle="summernote" data-lang="{{ summernote }}" class="form-control">{{ album_description[language.language_id] ? album_description[language.language_id].description }}</textarea>
                       {%if error_description[language.language_id] %}
                      <div class="text-danger">{{ error_description[language.language_id] }}</div>
                       {%endif%}
                    </div>
                  </div>
                </div>
                {%endfor%}
              </div>
            </div>
            <div class="tab-pane" id="tab-data">
              <div class="form-group">
				<label class="col-sm-2 control-label">{{ entry_image }}</label>
				<div class="col-sm-10"><a href="" id="thumb-image" data-toggle="image" class="img-thumbnail"><img src="{{ thumb }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
					<input type="hidden" name="image" value="{{ image }}" id="input-image" />
					{%if error_image %}
					<div class="text-danger">{{ error_image }}</div>
					 {%endif%}
				</div>
			 </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                <div class="col-sm-10">
                  <select name="status" id="input-status" class="form-control">
                   {%if status %}
                    <option value="1" selected="selected">{{ text_enabled }}</option>
                    <option value="0">{{ text_disabled }}</option>
                   {%else%}
                    <option value="1">{{ text_enabled }}</option>
                    <option value="0" selected="selected">{{ text_disabled }}</option>
                    {%endif%}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
                <div class="col-sm-10">
                  <input type="text" name="sort_order" value="{{ sort_order }}" placeholder="{{ entry_sort_order }}" id="input-sort-order" class="form-control" />
                </div>
              </div>
            </div>
			<div class="tab-pane" id="tab-seo">
              <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_keyword }}</div>
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_store }}</td>
                      <td class="text-left">{{ entry_keyword }}</td>
                    </tr>
                  </thead>
                  <tbody>
                  {% for store in stores %}
                  <tr>
                    <td class="text-left">{{ store.name }}</td>
                    <td class="text-left">{% for language in languages %}
                      <div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span>
                        <input type="text" name="gallery_seo_url[{{ store.store_id }}][{{ language.language_id }}]" value="{% if gallery_seo_url[store.store_id][language.language_id] %}{{ gallery_seo_url[store.store_id][language.language_id] }}{% endif %}" placeholder="{{ entry_keyword }}" class="form-control" />
                      </div>
                      {% if error_keyword[store.store_id][language.language_id] %}
                      <div class="text-danger">{{ error_keyword[store.store_id][language.language_id] }}</div>
                      {% endif %}
                      {% endfor %}</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                  
                </table>
              </div>
            </div>  
						<div class="tab-pane" id="tab-photos">
							<div class="panel-body">
								<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-album" class="form-horizontal">
									
									<table id="images" class="table table-striped table-bordered table-hover">
									<thead>
										<tr>
										<td class="text-left">{{ entry_photo_title }}</td>
										
										<td class="text-left">{{ entry_image }}</td>
										<td class="text-right">{{ entry_sort_order }}</td>
										<td>{{ column_action }}</td>
										</tr>
									</thead>
									<tbody>
									{% set image_row = 0 %}
										{% for album_image in album_images %}
										<tr id="image-row{{ image_row }}">
										<td class="text-left">
										{% for language in languages %}
											<div class="input-group pull-left"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span>
											<input type="text" name="album_image[{{ image_row }}][album_image_description][{{ language.language_id }}][title]" value="{{ album_image['album_image_description'][language.language_id] ? album_image['album_image_description'][language.language_id].title }}" placeholder="{{ entry_photo_title }}" class="form-control" />
											</div>
											{%if error_album_image[image_row][language.language_id] %}
											<div class="text-danger">{{ error_album_image[image_row][language.language_id] }}</div>
											{%endif%}
											{%endfor%}
										</td>
										<td class="text-left"><a href="" id="thumb-image{{ image_row }}" data-toggle="image" class="img-thumbnail"><img src="{{ album_image.thumb }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
											<input type="hidden" name="album_image[{{ image_row }}][image]" value="{{ album_image.image }}" id="input-image{{ image_row }}" />
												{%if error_album_images[image_row] %}
											<div class="text-danger">{{ error_album_images[image_row] }}</div>
												{%endif%}
										</td>
										<td class="text-right" style="width: 10%;"><input type="text" name="album_image[{{ image_row }}][sort_order]" value="{{ album_image['sort_order'] }}" placeholder="{{ entry_sort_order }}" class="form-control" /></td>
										<td class="text-left"><button type="button" onclick="$('#image-row{{ image_row }}, .tooltip').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
										</tr>
										{% set image_row = image_row + 1 %}
										{% endfor %}
									</tbody>
									<tfoot>
										<tr>
											<td colspan="3"></td>
											<td class="text-left"><button type="button" onclick="addPhoto();" data-toggle="tooltip" title="{{ button_album_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
										</tr>
									</tfoot>
									</table>
								</form>
								</div>			
						</div>
					</div>
        </form>
      </div>
    </div>
  </div>
<script type="text/javascript" src="view/javascript/summernote/summernote.js"></script>
  <link href="view/javascript/summernote/summernote.css" rel="stylesheet" />
  <script type="text/javascript" src="view/javascript/summernote/summernote-image-attributes.js"></script>
  <script type="text/javascript" src="view/javascript/summernote/opencart.js"></script>

<script type="text/javascript">
var image_row = {{ image_row }};

function addPhoto() {
	var html  = '<tr id="image-row' + image_row + '">';
    html += '  <td class="text-left">';
	{% for language in languages %}
	html += '    <div class="input-group">';
	html += '      <span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span><input type="text" name="album_image[' + image_row + '][album_image_description][{{ language.language_id }}][title]" value="" placeholder="{{ entry_photo_title }}" class="form-control" />';
    html += '    </div>';
	{% endfor %}
	html += '  </td>';
	html += '  <td class="text-left"><a href="" id="thumb-image' + image_row + '" data-toggle="image" class="img-thumbnail"><img src="{{ placeholder }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a><input type="hidden" name="album_image[' + image_row + '][image]" value="" id="input-image' + image_row + '" /></td>';
	html += '  <td class="text-right" style="width: 10%;"><input type="text" name="album_image[' + image_row + '][sort_order]" value="" placeholder="{{ entry_sort_order }}" class="form-control" /></td>';
	
	html += '  <td class="text-left"><button type="button" onclick="$(\'#image-row' + image_row  + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	
	html += '</tr>';
	
	$('#images tbody').append(html);
	image_row++;
}

$('#language a:first').tab('show');
</script>
</div>
{{ footer }}